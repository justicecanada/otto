{% comment %}
Template for updating document list items and, optionally, selected document status.
{% endcomment %}

{% load i18n %}

{# Swapped out of band #}
{% if selected_document %}
  {% include "librarian/components/document_status.html" with document=selected_document swap="true" %}
{% endif %}
{% include "librarian/components/poller.html" %}

{# Morphed into document list #}
{% include "librarian/components/document_list_inner.html" %}

{# Update total cost in header out-of-band so it changes even when only the list morphs #}
{% if total_cost %}<span id="librarian-total-cost" hx-swap-oob="true">{{ total_cost }}</span>{% endif %}
{% if total_chunks is not None %}
  <span id="librarian-total-chunks" hx-swap-oob="true">{{ total_chunks }}</span>
  {% if failed_count is not None %}
    <span id="librarian-failed-count" hx-swap-oob="true">{{ failed_count }}</span>
  {% endif %}
  {% if blocked_count is not None %}
    <span id="librarian-blocked-count" hx-swap-oob="true">{{ blocked_count }}</span>
  {% endif %}
{% endif %}
