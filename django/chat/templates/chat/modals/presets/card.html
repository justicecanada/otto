{% load i18n %}
{% load rules %}
{% has_perm "chat.edit_preset" user preset as can_edit_preset %}

<li class="card {{ preset.options.mode }}"
    tabindex="0"
    data-default="{{ preset.default }}">
  <div class="card-header align-items-center">
    <h6 class="card-title my-auto text-truncate me-2"
        title="{{ preset.name_auto }}">{{ preset.name_auto }}</h6>
    <div class="d-flex align-items-center">
      {% if can_edit_preset %}
        {% include "chat/modals/presets/edit_icon.html" %}
      {% endif %}
      {% include "chat/modals/presets/default_icon.html" %}
    </div>
  </div>

  <div class="card-body pt-2">
    <div class="info-section">
      {# Badge for the preset.options.mode #}
      {% if preset.options.mode == "qa" %}
        <span class="badge preset-mode-badge qa">{% trans "Q&A" %}</span>
      {% elif preset.options.mode == "summarize" %}
        <span class="badge preset-mode-badge summarize">{% trans "Summarize" %}</span>
      {% elif preset.options.mode == "translate" %}
        <span class="badge preset-mode-badge translate">{% trans "Translate" %}</span>
      {% elif preset.options.mode == "chat" %}
        <span class="badge preset-mode-badge chat">{% trans "Chat" %}</span>
      {% endif %}
      {% include "chat/modals/presets/shared_icon.html" %}
    </div>

    <p class="preset-description card-text">{{ preset.description_auto }}</p>

  </div>

  <div class="visually-hidden">
    <a class="preset-load-link"
       data-bs-dismiss="modal"
       href="#"
       hx-post="{% url 'chat:chat_options' chat_id=chat_id action='load_preset' preset_id=preset.id %}"
       hx-target="#options-accordion">{% trans "Load settings" %}</a>
  </div>
</li>
