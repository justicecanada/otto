{% load i18n %}

{% if message.details.steps %}
  <div class="mb-2">
    <button type="button"
            class="btn btn-sm btn-outline-dark me-1"
            onclick="toggleAgentSteps(this)">
      <span class="hide-steps-label">{% trans "Hide steps" %}</span>
      <span class="show-steps-label">{% trans "Show steps" %}</span>
    </button>
    <button type="button"
            class="btn btn-sm btn-outline-dark agent-output-toggle"
            onclick="toggleAgentOutput(this)">
      <span class="hide-output-label">{% trans "Hide step outputs" %}</span>
      <span class="show-output-label">{% trans "Show step outputs" %}</span>
    </button>
  </div>
  <div class="agent-steps mb-2" id="agent_steps_{{ message.id }}">
    {% for step in message.details.steps %}
      {% if step.name %}
        <div class="agent-step">
          <strong>{{ step.name }}</strong>
          {% for key, value in step.arguments.items %}
            {{ key }}=<em>{{ value }}</em>
            {% if not forloop.last %},{% endif %}
          {% endfor %}
        </div>
      {% elif step.thought %}
        <div class="agent-step">{{ step.thought|safe }}</div>
      {% elif step.output %}
        <div class="agent-output">
          <pre>{{ step.output }}</pre>
        </div>
      {% endif %}
    {% endfor %}
  </div>
{% endif %}
