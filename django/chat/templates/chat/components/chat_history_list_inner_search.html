{% load i18n %}

{% if chat_history_sections %}
  {% for section in chat_history_sections %}
    {% if section.chats|length %}
      {% with section_index=forloop.counter0 %}
        <div id="section-{{ section_index }}">
          <div class="chat-history-section-header small text-muted d-flex align-items-center">
            <span class="me-auto">{{ section.label }}</span>
            {% if section_index == 0 %}
              <i class="bi bi-pin-angle"
                 aria-hidden="true"
                 title="{% trans 'Pinned chats' %}"></i>
            {% endif %}
          </div>
          <ul class="list-unstyled" id="chat-list-{{ section_index }}">
            {% for chat in section.chats %}
              <li class="chat-list-item{% if chat.id == current_chat_id %} current{% endif %}"
                  id="chat-list-item-{{ chat.id }}">
                <div class="row border-bottom py-2 flex-nowrap">
                  <div class="col pe-2 overflow-x-hidden">
                    <a href="{% url 'chat:chat' chat_id=chat.id %}"
                       class="text-decoration-none">
                      {% if chat.id == current_chat_id %}
                        <span class="chat-title fw-semibold" id="current-chat-title">{{ chat.title }}</span>
                      {% else %}
                        <span class="chat-title">{{ chat.title }}</span>
                      {% endif %}
                    </a>
                  </div>
                </div>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endwith %}
    {% endif %}
  {% endfor %}
{% endif %}
