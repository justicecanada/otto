<div class="accordion accordion-flush border-top"
     id="options-accordion"
     {% if swap %}hx-swap-oob="true"{% endif %}>
  {% include 'chat/components/options_1_chat_with_ai.html' with options_section_id='chat' %}
  {% include 'chat/components/options_4_qa.html' with options_section_id='qa' %}
  {% include 'chat/components/options_2_summarize.html' with options_section_id='summarize' %}
  {% include 'chat/components/options_3_translate.html' with options_section_id='translate' %}
</div>
<script>
  (function (){
    if ("{{ preset_loaded }}" === "true" || "{{ swap }}" === "true") {
      let prompt = "{{ options_form.prompt.value }}";
      if (prompt != "") {
        document.getElementById("chat-prompt").value = prompt;
      }
      let mode = "{{ options_form.mode.value }}";
      handleModeChange(mode);
      setTimeout(updateQaSourceForms, 100);
    }
    if ("{{ trigger_library_change }}" === "true") {
      document.getElementById("id_qa_library").dispatchEvent(new Event('change'));
    }
  })();

  updateQaSourceForms();
  updateLibraryModalButton();
  updateAutocompleteLibraryid('id_qa_data_sources__textinput');
  updateAutocompleteLibraryid('id_qa_documents__textinput');
</script>
