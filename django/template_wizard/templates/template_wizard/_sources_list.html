{% load i18n %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h5 class="mb-0">{% trans "Selected sources" %}</h5>
  <form method="post"
        action="{% url 'template_wizard:delete_all_sources' session_id=session.pk %}"
        onsubmit="return confirm('{% trans "Are you sure you want to delete all sources?" %}');">
    {% csrf_token %}
    <button type="submit" class="btn btn-sm btn-outline-danger">{% trans "Delete all" %}</button>
  </form>
</div>
<ul class="list-group mb-3" id="sources-list">
  {% for source in session.sources.all %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      {% if source.url %}
        <a href="{{ source.url }}" target="_blank" rel="noopener">{{ source.url }}</a>
      {% elif source.filename %}
        <a href="{% url 'template_wizard:download_source_file' source.pk %}">{{ source.filename }}</a>
      {% else %}
        <span class="text-secondary">{{ source.text|truncatechars:50 }}</span>
      {% endif %}
      <form method="post"
            action="{% url 'template_wizard:delete_source' source.pk %}"
            class="ms-2 d-inline">
        {% csrf_token %}
        <button type="submit"
                class="btn btn-sm btn-outline-danger"
                title="{% trans 'Delete' %}">
          <i class="bi bi-trash"></i>
        </button>
      </form>
    </li>
  {% endfor %}
</ul>
