{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block page_title %}
  {% trans "Concierge Service - Otto" %}
{% endblock %}

{% block breadcrumb %}
  {{ block.super }}
  <li class="breadcrumb-item">
    <a href="{% url 'concierge_service:index' %}">{% trans "Concierge Service" %}</a>
  </li>
  <li class="breadcrumb-item">
    <a href="{% url 'concierge_service:request_list' %}">{% trans "User Requests" %}</a>
  </li>
{% endblock %}

{% block page_css %}
  <link rel="stylesheet"
        type="text/css"
        href="{% static 'thirdparty/css/datatables.min.css' %}">
{% endblock %}

{% block body %}
  <div class="table-responsive">
    <table class="table table-striped" id="requests">
      <thead>
        <tr>
          <th>{% trans "Request date" %}</th>
          {# <th>{% trans "Client" %}</th> #}
          <th>{% trans "Urgency" %}</th>
          <th>{% trans "Status" %}</th>
        </tr>
      </thead>
      <tbody>
        {% for ticket in concierge_tickets %}
          <tr>
            <td>
              <a href="{% url 'concierge_service:status' ticket.id %}">{{ ticket.created_at }}</a>
            </td>
            {# <td>{{ ticket.created_by }}</td> #}
            <td>{{ ticket.get_urgency_display }}</td>
            <td>{{ ticket.get_status_display }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}

{% block page_script %}
  <script src="{% static 'thirdparty/jquery3.7.1.min.js' %}"
          crossorigin="anonymous"></script>
  <script src="{% static 'thirdparty/datatables.min.js' %}"></script>
  <script>
  $(document).ready(function() {
    let dataTableConfig = {
      "paginate": false,
    };
    $('#requests').DataTable(dataTableConfig);
  });
  </script>
{% endblock %}
