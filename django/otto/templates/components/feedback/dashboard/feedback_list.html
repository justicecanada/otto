{% load i18n %}

<div class="row mt-3 border rounded g-0 pt-3">
  <h2 class="mb-3 fs-5 ps-2 fw-semibold" style="letter-spacing: -0.025em">{% trans "Latest feedback" %}</h2>
  <p class="mb-3 ps-2 text-muted">
    {% trans "Click on a row to view more information about the feedback received, to flag the feedback as \"addressed\" or to contact the user directly." %}
  </p>
  <div class="table-responsive">
    <table class="table mb-0" id="feedback-table">
      <thead>
        <tr>
          <th class="col-2">{% trans "Application" %}</th>
          <th class="col-8">{% trans "Message" %}</th>
          <th class="col-2"></th>
        </tr>
      </thead>
      <tbody>
        {% for info in feedback_info %}
          <tr data-bs-toggle="collapse"
              data-bs-target="#collapse-{{ info.feedback.id }}"
              aria-expanded="false"
              aria-controls="collapse-{{ info.feedback.id }}"
              onclick="this.classList.toggle('active')"
              class="feedback-summary px-2 py-4"
              style="cursor: pointer">
            <td class="w-full col-2">
              <div class="d-flex w-full align-items-center">
                {% include 'components/feedback/feedback_type_icon.html' %}
                <div class="d-flex flex-column flex-grow-1 ms-2 justify-content-center gap-1">
                  <span class="fw-semibold align-middle" style="font-size: 1.1rem;">{{ info.feedback.app|title }}</span>
                  <small class="text-muted text-truncate" style="font-size: .75rem;">{{ info.feedback.created_at|timesince }} {% trans 'ago' %}</small>
                </div>
              </div>
 
            </td>

            <td class="align-middle col-8">
              <span class="feedback-message">{{ info.feedback.feedback_message }}</span>
            </td>
            <td class="align-middle text-end col-2">{% include 'components/feedback/feedback_type_status.html' %}</td>
          </tr>
          {% include 'components/feedback/feedback_details.html' with feedback=info.feedback form=info.form %}
        {% endfor %}
 
      </tbody>
    </table>
  </div>
</div>
{% include "components/feedback/dashboard/pagination.html" %}
